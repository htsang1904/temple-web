{"version":3,"file":"flicking.esm.js","sources":["../src/VueRenderer.ts","../src/VuePanel.ts","../src/VueElementProvider.ts","../src/FlickingProps.ts","../src/utils.ts","../src/Flicking.ts","../src/index.ts"],"sourcesContent":["/*\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport {\n  ExternalRenderer,\n  getFlickingAttached,\n  PanelOptions,\n  RendererOptions\n} from \"@egjs/flicking\";\n\nimport VueFlicking from \"./Flicking\";\nimport VuePanel from \"./VuePanel\";\n\nexport interface VueRendererOptions extends RendererOptions {\n  vueFlicking: VueFlicking;\n}\n\nclass VueRenderer extends ExternalRenderer {\n  // Internal States\n  private _vueFlicking: VueFlicking;\n\n  public constructor(options: VueRendererOptions) {\n    super(options);\n\n    this._vueFlicking = options.vueFlicking;\n  }\n\n  public async render() {\n    const flicking = getFlickingAttached(this._flicking);\n    const vueFlicking = this._vueFlicking;\n    const strategy = this._strategy;\n\n    strategy.updateRenderingPanels(flicking);\n    strategy.renderPanels(flicking);\n\n    return new Promise<void>((resolve) => {\n      vueFlicking.$once(\"render\", () => {\n        this._afterRender();\n        resolve();\n      });\n      vueFlicking.$forceUpdate();\n    });\n  }\n\n  public async forceRenderAllPanels() {\n    const vueFlicking = this._vueFlicking;\n\n    await super.forceRenderAllPanels();\n\n    return new Promise<void>((resolve) => {\n      vueFlicking.$once(\"render\", resolve);\n      vueFlicking.$forceUpdate();\n    });\n  }\n\n  protected _collectPanels() {\n    const flicking = getFlickingAttached(this._flicking);\n    const vueFlicking = this._vueFlicking;\n    const vuePanels = vueFlicking.$children;\n\n    this._panels = this._strategy.collectPanels(flicking, vuePanels);\n  }\n\n  protected _createPanel(externalComponent: VuePanel, options: PanelOptions) {\n    return this._strategy.createPanel(externalComponent, options);\n  }\n}\n\nexport default VueRenderer;\n","/*\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Vue from \"vue\";\n\nconst VuePanel = Vue.extend<{ hide: boolean }, { getElement: () => HTMLElement }, {}>({\n  data() {\n    return {\n      hide: false\n    };\n  },\n  render() {\n    const children = this.hide\n      ? undefined\n      : this.$slots.default ?? [];\n\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n    return children as any;\n  },\n  methods: {\n    getElement(): HTMLElement { return this.$el as HTMLElement; }\n  }\n});\n\ntype VuePanelType = InstanceType<typeof VuePanel>;\n\ninterface VuePanel extends VuePanelType {}\nexport default VuePanel;\n","/*\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport { ElementProvider } from \"@egjs/flicking\";\n\nimport VuePanel from \"./VuePanel\";\n\nclass VueElementProvider implements ElementProvider {\n  private _el: VuePanel;\n\n  public get element() { return this._el.getElement(); }\n  public get rendered() { return !this._el.hide; }\n\n  public constructor(el: VuePanel) {\n    this._el = el;\n  }\n\n  public show() {\n    this._el.hide = false;\n  }\n\n  public hide() {\n    this._el.hide = true;\n  }\n}\n\nexport default VueElementProvider;\n","import { PropType } from \"vue\";\nimport { RecordPropsDefinition } from \"vue/types/options\";\nimport { FlickingOptions, Plugin, Status } from \"@egjs/flicking\";\n\nexport default {\n  viewportTag: {\n    type: String,\n    default: \"div\",\n    required: false\n  },\n  cameraTag: {\n    type: String,\n    default: \"div\",\n    required: false\n  },\n  cameraClass: {\n    type: String,\n    default: \"\",\n    required: false\n  },\n  hideBeforeInit: {\n    type: Boolean,\n    default: false,\n    required: false\n  },\n  firstPanelSize: {\n    type: String,\n    required: false\n  },\n  options: {\n    type: Object as PropType<Partial<FlickingOptions>>,\n    default: () => ({}),\n    required: false\n  },\n  plugins: {\n    type: Array as PropType<Plugin[]>,\n    default: () => ([]),\n    required: false\n  },\n  status: {\n    type: Object as PropType<Status>,\n    required: false\n  }\n} as RecordPropsDefinition<{\n  readonly viewportTag: string;\n  readonly cameraTag: string;\n  readonly cameraClass: string;\n  readonly hideBeforeInit: boolean;\n  readonly firstPanelSize: string;\n  readonly options: Partial<FlickingOptions>;\n  readonly plugins: Plugin[];\n  readonly status: Status;\n}>;\n\n","import Vue from \"vue\";\n\nexport const getSlots = (component: Vue) => {\n  return component.$slots.default?.filter(slot => slot.tag) ?? [];\n};\n\nexport const fillKeys = (component: Vue) => {\n  const vnodes = getSlots(component);\n\n  vnodes.forEach((node, idx) => {\n    if (node.key == null) {\n      node.key = `$_${idx}`;\n    }\n  });\n};\n","/*\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport ListDiffer, { DiffResult } from \"@egjs/list-differ\";\nimport Vue, { CreateElement, VNodeData, VNode } from \"vue\";\nimport VanillaFlicking, {\n  EVENTS,\n  withFlickingMethods,\n  sync,\n  Plugin,\n  getRenderingPanels,\n  getDefaultCameraTransform,\n  range,\n  VirtualRenderingStrategy,\n  NormalRenderingStrategy\n} from \"@egjs/flicking\";\n\nimport VueRenderer, { VueRendererOptions } from \"./VueRenderer\";\nimport VuePanel from \"./VuePanel\";\nimport VueElementProvider from \"./VueElementProvider\";\nimport FlickingProps from \"./FlickingProps\";\nimport { fillKeys, getSlots } from \"./utils\";\n\nconst Flicking = Vue.extend({\n  props: FlickingProps,\n  components: {\n    Panel: VuePanel\n  },\n  data() {\n    // Mocking the type, as we don't want them to be reactive\n    return {} as {\n      vanillaFlicking: VanillaFlicking;\n      pluginsDiffer: ListDiffer<Plugin>;\n      slotDiffer: ListDiffer<VNode>;\n      diffResult: DiffResult<VNode> | null;\n    };\n  },\n  created() {\n    this.diffResult = null;\n\n    withFlickingMethods(this, \"vanillaFlicking\");\n  },\n  mounted() {\n    const options = this.options;\n    const viewportEl = this.$el as HTMLElement;\n    const rendererOptions: VueRendererOptions = {\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n      vueFlicking: this as any,\n      align: options.align,\n      strategy: options.virtual && (options.panelsPerView ?? -1) > 0\n        ? new VirtualRenderingStrategy()\n        : new NormalRenderingStrategy({\n          providerCtor: VueElementProvider\n        })\n    };\n\n    const flicking = new VanillaFlicking(viewportEl, {\n      ...options,\n      externalRenderer: new VueRenderer(rendererOptions)\n    });\n    this.vanillaFlicking = flicking;\n\n    flicking.once(EVENTS.READY, () => {\n      this.$forceUpdate();\n    });\n\n    const slots = getSlots(this);\n    this.slotDiffer = new ListDiffer<VNode>(slots, vnode => (vnode.key as string));\n    this.pluginsDiffer = new ListDiffer<Plugin>();\n\n    this._bindEvents();\n    this._checkPlugins();\n\n    if (this.status) {\n      flicking.setStatus(this.status);\n    }\n  },\n  beforeDestroy() {\n    this.vanillaFlicking?.destroy();\n  },\n  beforeMount() {\n    fillKeys(this);\n  },\n  beforeUpdate() {\n    fillKeys(this);\n\n    this.diffResult = this.slotDiffer.update(getSlots(this));\n  },\n  updated() {\n    const flicking = this.vanillaFlicking;\n    const diffResult = this.diffResult;\n\n    this._checkPlugins();\n    this.$emit(\"render\");\n\n    if (!diffResult || !flicking.initialized) return;\n\n    sync(flicking, diffResult, this.$children);\n\n    if (diffResult.added.length > 0 || diffResult.removed.length > 0) {\n      this.$forceUpdate();\n    }\n\n    this.diffResult = null;\n  },\n  render(h: CreateElement): VNode {\n    const flicking = this.vanillaFlicking;\n    const options = this.options;\n    const initialized = !!this.diffResult && flicking && flicking.initialized;\n    const isHorizontal = flicking\n      ? flicking.horizontal\n      : options.horizontal ?? true;\n\n    const viewportData: VNodeData = {\n      class: {\n        \"flicking-viewport\": true,\n        \"vertical\": !isHorizontal,\n        \"flicking-hidden\": this.hideBeforeInit && !initialized\n      }\n    };\n    const cameraData: VNodeData = {\n      class: {\n        \"flicking-camera\": true,\n        [this.cameraClass]: !!this.cameraClass\n      },\n      style: !initialized && this.firstPanelSize\n        ? { transform: getDefaultCameraTransform(options.align, options.horizontal, this.firstPanelSize) }\n        : {}\n    };\n\n    const panels = options.virtual && (options.panelsPerView ?? -1) > 0\n      ? this._getVirtualPanels(h, initialized)\n      : this._getPanels(h, initialized);\n\n    return h(this.viewportTag, viewportData,\n      [h(this.cameraTag, cameraData,\n        panels,\n      ), this.$slots.viewport],\n    );\n  },\n  methods: {\n    /* eslint-disable @typescript-eslint/naming-convention */\n    _getSlots() {\n      return this.$slots.default?.filter(slot => slot.tag) ?? [];\n    },\n    _fillKeys() {\n      const vnodes = this._getSlots();\n\n      vnodes.forEach((node, idx) => {\n        if (node.key == null) {\n          node.key = `$_${idx}`;\n        }\n      });\n    },\n    _bindEvents() {\n      const flicking = this.vanillaFlicking;\n      const events = Object.keys(EVENTS).map(key => EVENTS[key]);\n\n      events.forEach(eventName => {\n        flicking.on(eventName, (e: any) => {\n          e.currentTarget = this;\n          // Make events from camelCase to kebab-case\n          this.$emit(eventName.replace(/([A-Z])/g, \"-$1\").toLowerCase(), e);\n        });\n      });\n    },\n    _checkPlugins() {\n      const { list, added, removed, prevList } = this.pluginsDiffer.update(this.plugins);\n\n      this.vanillaFlicking.addPlugins(...added.map(index => list[index]));\n      this.vanillaFlicking.removePlugins(...removed.map(index => prevList[index]));\n    },\n    _getPanels(h: CreateElement, initialized: boolean) {\n      const slots = initialized\n        ? getRenderingPanels(this.vanillaFlicking, this.diffResult!)\n        : this._getSlots();\n      return slots.map(slot => h(\"Panel\", { key: slot.key as string }, [slot]));\n    },\n    _getVirtualPanels(h: CreateElement, initialized: boolean) {\n      const options = this.options;\n      const {\n        panelClass = \"flicking-panel\"\n      } = options.virtual!;\n      const panelsPerView = options.panelsPerView as number;\n      const flicking = this.vanillaFlicking;\n\n      const renderingIndexes = initialized\n        ? flicking.renderer.strategy.getRenderingIndexesByOrder(flicking)\n        : range(panelsPerView + 1);\n\n      const firstPanel = flicking && flicking.panels[0];\n      const size = firstPanel\n        ? flicking.horizontal\n          ? { width: firstPanel.size }\n          : { height: firstPanel.size }\n        : {};\n\n      return renderingIndexes.map(idx => h(\"div\", {\n        key: idx,\n        staticClass: panelClass,\n        style: size,\n        domProps: {\n          \"data-element-index\": idx\n        }\n      }));\n    }\n  },\n  watch: {\n    options: {\n      handler(newOptions) {\n        const flicking = this.vanillaFlicking;\n        if (!flicking) return;\n\n        // Omit 'virtual', as it can't have any setter\n        const { virtual, ...options } = newOptions; // eslint-disable-line @typescript-eslint/no-unused-vars\n\n        for (const key in options) {\n          if (key in flicking && flicking[key] !== options[key]) {\n            flicking[key] = options[key];\n          }\n        }\n      },\n      deep: true,\n      immediate: true\n    }\n  }\n});\n\ntype VueFlicking = InstanceType<typeof Flicking>;\n\ninterface Flicking extends VueFlicking, VanillaFlicking {}\nexport default Flicking;\n","/*\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\n/* eslint-disable @typescript-eslint/naming-convention */\nimport { VueConstructor } from \"vue\";\n\nimport Flicking from \"./Flicking\";\n\ndeclare global {\n  interface Window {\n    Vue: VueConstructor;\n  }\n}\n\nconst version = \"#__VERSION__#\";\nconst install = (Vue: VueConstructor): void => {\n  Vue.component(\"Flicking\", Flicking);\n};\n\nconst plugin = {\n  Flicking,\n  install,\n  version\n};\n\nexport * from \"@egjs/flicking\";\nexport default plugin;\nexport {\n  version,\n  Flicking,\n  install\n};\n"],"names":["__extends","options","_super","_this","_vueFlicking","vueFlicking","__proto","VueRenderer","prototype","flicking","getFlickingAttached","_flicking","strategy","_strategy","updateRenderingPanels","renderPanels","Promise","resolve","$once","_afterRender","$forceUpdate","forceRenderAllPanels","_a","vuePanels","$children","_panels","collectPanels","externalComponent","createPanel","ExternalRenderer","VuePanel","Vue","extend","data","hide","render","children","undefined","$slots","default","methods","getElement","$el","el","_el","VueElementProvider","Object","viewportTag","type","String","required","cameraTag","cameraClass","hideBeforeInit","Boolean","firstPanelSize","plugins","Array","status","getSlots","component","filter","slot","tag","fillKeys","vnodes","forEach","node","idx","key","Flicking","props","FlickingProps","components","Panel","created","diffResult","withFlickingMethods","mounted","viewportEl","rendererOptions","align","virtual","panelsPerView","VirtualRenderingStrategy","NormalRenderingStrategy","providerCtor","VanillaFlicking","externalRenderer","vanillaFlicking","once","EVENTS","READY","slots","slotDiffer","ListDiffer","vnode","pluginsDiffer","_bindEvents","_checkPlugins","setStatus","beforeDestroy","destroy","beforeMount","beforeUpdate","update","updated","$emit","initialized","sync","added","length","removed","h","isHorizontal","horizontal","viewportData","class","cameraData","style","transform","getDefaultCameraTransform","panels","_getVirtualPanels","_getPanels","viewport","_getSlots","_fillKeys","events","keys","map","eventName","on","e","currentTarget","replace","toLowerCase","_c","list","prevList","addPlugins","index","_b","removePlugins","getRenderingPanels","panelClass","renderingIndexes","renderer","getRenderingIndexesByOrder","range","firstPanel","size","width","height","staticClass","domProps","watch","handler","newOptions","deep","immediate","version","install","plugin"],"mappings":"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"}